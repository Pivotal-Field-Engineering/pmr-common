<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Pivotal MapReduce Common Library and Utilities</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">      
      <script type="text/javascript" src="header.js"> </script>
      <section>
        
		
<h3>Welcome to the PMR library for Pivotal HD!</h3>

<p>
As a means to share knowledge, code, and save time (I hear it = money), Pivotal MapReduce Common (PMR) is an effort to maintain commonly used Java MapReduce tools and utilities for Pivotal HD.  Feel free to send pull requests and collaborate, and use at your own risk :)
</p>
<p>
PMR contains the following features and capabilities:
<br/><br/>
<font size="3"><b><i>Input and Output Formats</i></b></font>
<ul>
  <li><b>CombineTextInputFormat</b><br/>An extension of TextInputFormat that batches files together to pack multiple blocks into a specified number of map tasks.</li>
  <li><b>JsonInputFormat/CombineJsonInputFormat</b><br/>Splittable input formats to read JSON data, either one record per line or &quot;pretty print&quot;.  The combine input format will batches files together to pack multiple blocks into a specified number of map tasks.</li>
  <li><b>WholeFileInputFormat/CombineWholeFileInputFormat</b><br/>An input format that reads an entire file as a single key/value pair, with the key as the file name and the value as the bytes of the file.  This creates one map task per file.  The combine input format will batches files together to pack multiple blocks into a specified number of map tasks.</li>
  <li><b>DummyInputFormat</b><br/>An input format that does nothing.  Users specify the number of map tasks to create, and it will pass a single key/value pair of NullWritables to a map task before completing.  The opposite of this is the NullOutputFormat, which is already shipped with Hadoop.  This output format ignores all output key/value pairs and generates no files.</li>
  <li><b>HawqOutputFormat</b><br/>An output format that uses a JDBC connection to write a row of data to HAWQ.  The key of the output is the row of data, delimited by a configurable delimiter.  The output format splits on this delimiter to generate an INSERT statement, which is then written to HAWQ.  <b>Not intended to be faster than gpfdist or PXF</b>, but reasonable to use for small data sets to skip the extra step.</li>
  <li><b>Pig HawqLoader</b><br/>A Pig StoreFunc that can be used to write Pig jobs against HAWQ tables.  Usage can be found in the <a href="pmr/apidocs/index.html?com/gopivotal/pig/HawqLoader.html">Java Doc</a></li>
</ul>

<font size="3"><b><i>Utilities</i></b></font>
<ul>
  <li><b>HawqIngestTool</b><br/>A MapReduce analytic to push rows of data from HDFS files to PostgreSQL JDBC driver. <b>Not intended to be faster than gpfdist or PXF</b>, but reasonable to use for small data sets to skip the extra step.</li>
</ul>

<font size="3"><b><i>Examples</i></b></font>
<br>
The PivotalMRExamples project contains tools and code examples which leverage some of the classes in PMR.
<ul>
  <li><b>HBase</b><br/>Examples demonstrating bulk load, re-splitting tables, and a simple HBase application.</li>
  <li><b>SleepDriver</b><br/>An example MapReduce job which starts a configurable number of map tasks for a configurable number of seconds</li>
</ul>
</p>
<p>
PMR is hosted in the pmr-common GitHub repository for the Pivotal Field Engineering organization.  You can clone this directly using the below command.
</p>
<p><code>
git clone https://github.com/Pivotal-Field-Engineering/pmr-common.git
</code>
</p>
<p>
The library is then built using <a href="http://maven.apache.org">Apache Maven</a>.  Some dependencies for HAWQ are not yet in a Maven repository, but they can be installed manually using the provided <code>add-mvn-dependencies.sh</code> script.  If building on a machine that has Pivotal HD/HAWQ installed, you can just run it.  The needed jars are pulled from the default installation location of HAWQ.  If not, you can put the needed jar files into a local 'lib' directory, change a flag, and then install.
<p>
<code>
# If on a PHD machine<br>
cd pmr-common/<br>
sh add-mvn-dependencies.sh<br>
<br>
# If not on a PHD machine<br>
cd pmr-common/<br>
mkdir lib<br>
# Copy jars into lib<br>
# Modify add-mvn-dependencies to uncomment LIB_DIR<br>
sh add-mvn-dependencies.sh
</code>
</p>
<p>
You can then build and install PivotalMRCommon, and then any desired examples/tools (if any).
</p>
<p>
<code>
cd pmr-common/PivotalMRCommon<br>
mvn clean install
</code>
</p>
<p>
The built jar file can be added using the following Maven dependency:
</p>
<p>
<code>
&lt;dependency&gt;<br>
&nbsp;&nbsp;&lt;groupId&gt;com.gopivotal&lt;/groupId&gt;<br>
&nbsp;&nbsp;&lt;artifactId&gt;pmr-common&lt;/artifactId&gt;<br>
&nbsp;&nbsp;&lt;version&gt;2.0.1&lt;/version&gt;<br>
&lt;/dependency&gt;
</code>
</p>
<p>
Please use the links to the left to navigate further
</p>
</section>

      <footer>
        <p>This project is maintained by <a href="https://github.com/Pivotal-Field-Engineering">Pivotal-Field-Engineering</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
